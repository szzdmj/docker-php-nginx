[www]
user = nobody
group = nobody

; 使用 TCP，避免 /run/php socket 目录/权限问题
listen = 127.0.0.1:9000
listen.allowed_clients = 127.0.0.1

pm = dynamic
pm.max_children = 10
pm.start_servers = 2
pm.min_spare_servers = 1
pm.max_spare_servers = 5
pm.max_requests = 500

; 让工作进程输出并入主日志
catch_workers_output = yes
decorate_workers_output = no
clear_env = no

; 将错误输出到 stderr，便于容器日志收集
php_admin_flag[log_errors] = on
php_admin_value[error_log] = /proc/self/fd/2

; 健康检查与状态
ping.path = /fpm-ping
pm.status_path = /fpm-status

; 安全限制（按需）
security.limit_extensions = .php .php3 .php4 .php5 .php7 .php8
